# ‚ö° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –≤ Figma –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `avatars.mds.yandex.net`), —Ö–æ—Ç—è –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ –æ—Ç–ª–∏—á–Ω–æ.

## üéØ –ü—Ä–∏—á–∏–Ω–∞

**CORS (Cross-Origin Resource Sharing)** ‚Äî –Ø–Ω–¥–µ–∫—Å CDN –∏ –¥—Ä—É–≥–∏–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö Figma –ø–ª–∞–≥–∏–Ω–æ–≤. –í development —Ä–µ–∂–∏–º–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –∞ –≤ production ‚Äî —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä—ã Figma, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback —Å CORS Proxy

–ü–ª–∞–≥–∏–Ω —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

1. **–ü—Ä—è–º–æ–π URL** ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é
2. **CORS Proxy** ‚Äî –µ—Å–ª–∏ –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `corsproxy.io`
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** ‚Äî –µ—Å–ª–∏ –æ–±–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

**–§–∞–π–ª:** [src/plugin/helpers.ts](./src/plugin/helpers.ts)

```typescript
export async function fillImageFromUrl(node, imageUrl) {
  const strategies = [
    { name: 'Direct URL', url: imageUrl },
    { name: 'CORS Proxy', url: `https://corsproxy.io/?${encodeURIComponent(imageUrl)}` },
  ];

  for (const strategy of strategies) {
    try {
      console.log(`[SnapFill] Trying: ${strategy.name}`);
      const image = await figma.createImageAsync(strategy.url);
      node.fills = [{ type: 'IMAGE', imageHash: image.hash, scaleMode: 'FIT' }];
      console.log(`[SnapFill] ‚úì Success with ${strategy.name}`);
      return; // –£—Å–ø–µ—Ö!
    } catch (error) {
      console.warn(`[SnapFill] ‚úó ${strategy.name} failed`);
    }
  }

  // –í—Å–µ –º–µ—Ç–æ–¥—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
  figma.notify('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', { error: true });
}
```

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

‚úÖ –ü–ª–∞–≥–∏–Ω —É–∂–µ —Å–æ–±—Ä–∞–Ω —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ Figma
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ CORS proxy

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω –≤ Figma Community
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å (Plugins ‚Üí Development ‚Üí Open Console) –¥–ª—è –ª–æ–≥–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ CORS proxy –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å:

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [docs/MIGRATION_TO_LOCAL_IMAGES.md](./docs/MIGRATION_TO_LOCAL_IMAGES.md)
2. –°–∫–∞—á–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `mkdir -p src/assets/images`
3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ base64: `npm run images:convert`
4. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö (–∑–∞–º–µ–Ω–∏—Ç—å URL –Ω–∞ `images.–Ω–∞–∑–≤–∞–Ω–∏–µ`)
5. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `npm run build`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:** [docs/IMAGE_LOADING_TROUBLESHOOTING.md](./docs/IMAGE_LOADING_TROUBLESHOOTING.md)
- **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** [docs/MIGRATION_TO_LOCAL_IMAGES.md](./docs/MIGRATION_TO_LOCAL_IMAGES.md)
- **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:** [CHANGELOG.md](./CHANGELOG.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. –û—Ç–∫—Ä–æ–π—Ç–µ Figma Desktop
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–≥–∏–Ω
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å: `Plugins ‚Üí Development ‚Üí Open Console`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—Ä–µ–π–º—ã –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏—Ö –¥–∞–Ω–Ω—ã–º–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
[SnapFill] Trying strategy: Direct URL for https://avatars.mds.yandex.net/...
[SnapFill] ‚úó Direct URL failed: NetworkError
[SnapFill] Trying strategy: CORS Proxy for https://corsproxy.io/?...
[SnapFill] ‚úì Image loaded with CORS Proxy: abc123def
[SnapFill] ‚úì Image applied successfully
```

### –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –ª–æ–≥–∏?

- `‚úì Success with Direct URL` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å –Ω–∞–ø—Ä—è–º—É—é (–∏–¥–µ–∞–ª—å–Ω–æ!)
- `‚úó Direct URL failed` ‚Üí `‚úì Success with CORS Proxy` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback (—Ä–∞–±–æ—Ç–∞–µ—Ç!)
- `‚úó All strategies failed` ‚Äî –Ω–∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ URL)

## ‚öôÔ∏è –ö–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø–ª–∞–≥–∏–Ω
npm run build

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ base64
npm run images:convert

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
npm run dev
```

## üé® –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ CDN —Å CORS

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–µ–∂–∞—Ç—å CORS –ø—Ä–æ–±–ª–µ–º, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN —Å –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CORS:

- **Imgur**: `https://i.imgur.com/...`
- **Cloudinary**: `https://res.cloudinary.com/...`
- **imgbb**: `https://i.ibb.co/...`

–ó–∞–º–µ–Ω–∏—Ç–µ URL –≤ —Ñ–∞–π–ª–∞—Ö –¥–∞–Ω–Ω—ã—Ö ([src/presets/data/](./src/presets/data/)) –Ω–∞ –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö CDN.

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –°–∫–æ—Ä–æ—Å—Ç—å | –†–∞–∑–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|-----------|----------|---------------|-----------|
| **CORS Proxy** (—Ç–µ–∫—É—â–µ–µ) | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚úÖ –ú–∞–ª–µ–Ω—å–∫–∏–π | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è |
| **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚ö†Ô∏è –ë–æ–ª—å—à–æ–π | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **–°–≤–æ–π CDN —Å CORS** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚úÖ –ú–∞–ª–µ–Ω—å–∫–∏–π | ‚ö†Ô∏è –°–ª–æ–∂–Ω–∞—è |

## ‚ùì FAQ

**Q: –ü–æ—á–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –∞ –≤ production –Ω–µ—Ç?**
A: Development –ø–ª–∞–≥–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –±–µ–∑ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. Production –ø–ª–∞–≥–∏–Ω—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä—ã Figma, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –º–Ω–æ–≥–∏–º–∏ CDN.

**Q: CORS Proxy –±–µ–∑–æ–ø–∞—Å–µ–Ω?**
A: `corsproxy.io` ‚Äî —ç—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ —Å–≤–æ–π CDN.

**Q: –ö–∞–∫ –¥–æ–ª–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–µ—à–∏—Ä—É—é—Ç—Å—è?**
A: Figma –∫–µ—à–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ hash. –û–¥–Ω–æ –∏ —Ç–æ –∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ proxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–º. [MIGRATION_TO_LOCAL_IMAGES.md](./docs/MIGRATION_TO_LOCAL_IMAGES.md))

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –ø–ª–∞–≥–∏–Ω —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ production. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –≤ Figma –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã—à–µ.

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-12
**–í–µ—Ä—Å–∏—è –ø–ª–∞–≥–∏–Ω–∞:** 0.1.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –≤ Figma Community –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö URL, —Ö–æ—Ç—è –≤ development —Ä–µ–∂–∏–º–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –ü—Ä–∏—á–∏–Ω—ã

1. **CORS (Cross-Origin Resource Sharing)**
   - CDN —Å–µ—Ä–≤–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `avatars.mds.yandex.net`) –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ Figma
   - Figma –ø–ª–∞–≥–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ proxy —Å–µ—Ä–≤–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º–∏ CDN

2. **–°–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
   - –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∏–º–µ—é—Ç –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ proxy —Å–µ—Ä–≤–µ—Ä—ã Figma –º–æ–≥—É—Ç –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã

3. **–¢–∞–π–º-–∞—É—Ç–∏**
   - Production –≤–µ—Ä—Å–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –±–æ–ª–µ–µ –∂–µ—Å—Ç–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

### –ü–æ—á–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- Development –ø–ª–∞–≥–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö proxy —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ú–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –†–µ—à–µ–Ω–∏—è

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CORS Proxy (—Ç–µ–∫—É—â–µ–µ)

–ü–ª–∞–≥–∏–Ω —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∑–∞–≥—Ä—É–∑–∫–∏:

1. **–ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é
2. **CORS Proxy** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `corsproxy.io` –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ** - –µ—Å–ª–∏ –≤—Å–µ –º–µ—Ç–æ–¥—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏

```typescript
// –ö–æ–¥ –≤ src/plugin/helpers.ts
export async function fillImageFromUrl(node, imageUrl) {
  const strategies = [
    { name: 'Direct URL', url: imageUrl },
    { name: 'CORS Proxy', url: `https://corsproxy.io/?${encodeURIComponent(imageUrl)}` },
  ];

  for (const strategy of strategies) {
    try {
      const image = await figma.createImageAsync(strategy.url);
      node.fills = [{ type: 'IMAGE', imageHash: image.hash, scaleMode: 'FIT' }];
      return; // Success!
    } catch (error) {
      // Try next strategy
    }
  }

  // Show error notification
  figma.notify('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', { error: true });
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º CDN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (corsproxy.io)
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ

---

### üéØ –†–µ—à–µ–Ω–∏–µ 2: –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

–í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö URL, —Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–ª–∞–≥–∏–Ω–µ –∫–∞–∫ base64.

#### –®–∞–≥ 1: –°–∫–∞—á–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
mkdir -p src/assets/images/products

# –°–∫–∞—á–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä)
curl "https://avatars.mds.yandex.net/..." -o src/assets/images/products/iphone.jpg
```

#### –®–∞–≥ 2: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ base64

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/images-to-base64.js`:

```javascript
import fs from 'fs';
import path from 'path';

const imagesDir = 'src/assets/images/products';
const outputFile = 'src/assets/images-data.ts';

const files = fs.readdirSync(imagesDir);
const images = {};

files.forEach(file => {
  const filePath = path.join(imagesDir, file);
  const base64 = fs.readFileSync(filePath).toString('base64');
  const ext = path.extname(file).slice(1);
  const name = path.basename(file, path.extname(file));
  images[name] = `data:image/${ext};base64,${base64}`;
});

const output = `export const images = ${JSON.stringify(images, null, 2)};`;
fs.writeFileSync(outputFile, output);
```

#### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –¥–∞–Ω–Ω—ã—Ö

```typescript
import { images } from '../assets/images-data';

export const productsData = [
  {
    title: 'iPhone 15 Pro',
    image: images.iphone,  // ‚Üê base64 –≤–º–µ—Å—Ç–æ URL
    price: '89 990 ‚ÇΩ'
  }
];
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç 100% –Ω–∞–¥–µ–∂–Ω–æ
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

### üåê –†–µ—à–µ–Ω–∏–µ 3: –°–≤–æ–π CDN —Å CORS

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏:

```javascript
// –ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'GET');
  next();
});
```

–ò –∏–∑–º–µ–Ω–∏—Ç–µ URL –≤ –¥–∞–Ω–Ω—ã—Ö:

```typescript
export const productsData = [
  {
    image: 'https://your-cdn.com/images/iphone.jpg'  // –í–∞—à CDN —Å CORS
  }
];
```

---

### üîß –†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å publicCDN —Å CORS

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ CDN –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç CORS –¥–ª—è Figma:

- **Imgur**: `https://i.imgur.com/...`
- **Cloudinary**: `https://res.cloudinary.com/...`
- **imgbb**: `https://i.ibb.co/...`

```typescript
export const productsData = [
  {
    image: 'https://i.imgur.com/abc123.jpg'  // ‚Üê CDN —Å CORS
  }
];
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞?

1. –û—Ç–∫—Ä–æ–π—Ç–µ Figma Desktop
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–≥–∏–Ω
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å: `Plugins ‚Üí Development ‚Üí Open Console`
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ—Ä–µ–π–º—ã –¥–∞–Ω–Ω—ã–º–∏
5. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:

```
[SnapFill] Trying strategy: Direct URL for https://...
[SnapFill] ‚úó Direct URL failed: NetworkError
[SnapFill] Trying strategy: CORS Proxy for https://corsproxy.io/?...
[SnapFill] ‚úì Image loaded with CORS Proxy: abc123def
[SnapFill] ‚úì Image applied successfully
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

**NetworkError** - –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é –∏–ª–∏ CORS
‚Üí –†–µ—à–µ–Ω–∏–µ: CORS Proxy –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**TimeoutError** - –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
‚Üí –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π CDN

**Invalid URL** - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç URL
‚Üí –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `http://` –∏–ª–∏ `https://`

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Development)
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ URL - –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ

### –î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (Production)
‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç 1**: CORS Proxy (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏
‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç 2**: –õ–æ–∫–∞–ª—å–Ω—ã–µ base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç 3**: –°–≤–æ–π CDN —Å CORS - –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ï—Å–ª–∏ –≤—ã —Ä–µ—à–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

1. –°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ base64
3. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö –≤ `src/presets/data/`

–ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:

```bash
#!/bin/bash
# download-images.sh

urls=(
  "https://avatars.mds.yandex.net/get-mpic/4113189/..."
  "https://avatars.mds.yandex.net/get-mpic/12369201/..."
)

for i in "${!urls[@]}"; do
  curl "${urls[$i]}" -o "src/assets/images/product_$i.jpg"
  echo "Downloaded image $i"
done
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø–ª–∞–≥–∏–Ω: `npm run build`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ Figma
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –≤ Figma Desktop
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `networkAccess` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `manifest.json`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π CDN
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ
